
<% layout('layouts/boilerplate')%>
<link rel="stylesheet" href="/stylesheets/styles.css">
<div class="row">
    <h1 class="text-center mt-3">Edit Recipe</h1>
    <div class="col-6 offset-3">
        <form action="/recipes/<%=recipe._id%>?_method=PUT" method="POST" novalidate class="validated-form">
            <div class="mb-3">
                <label class="form-label" for="title">Title</label>
                <input class="form-control" type="text" id="title" name="recipe[title]"
                    value="<%=recipe.title %>" required>
                <div class="valid-feedback">Looking Good!</div>
            </div>
            <div class="mb-3">
                <label class="form-label" for="instructions">Instructions</label>
                <input class="form-control" type="text" id="instructions" name="recipe[instructions]"
                    value="<%=recipe.instructions %>" required>
                    <div class="valid-feedback">Great!</div>
            </div>
            <div id="ingredient-container"class="mb-3">
                <div id="single-ingredient">
                    <label class="ingredient-label form-label" for="ingredients">Ingredients</label>
                    <input class="form-control ingredient-form" type="number" id="ingredients" name="ingredients[0]" placeholder="0" required>
                    <select class="form-select ingredient-form" aria-label="Default select example" name="ingredients[0]">
                        <option value="cups">Cups</option>
                        <option value="ounces">Ounces</option>
                        <option value="tbps">Tbps</option>
                        <option value="tsps">Tsp</option>
                    </select> 
                <input class=" form-control ingredient-form" type="text" name="ingredients[0]">
                </div>
            </div>
            <div><button type="button" id="addIngredient">Add Another Ingredient</button></div>

            <div class="mb-3">
                <label class="form-label" for="preptime">Preptime</label>
                <div class="input-group">
                    <input type="text" class="form-control" id="preptime" name="recipe[preptime]" value="<%=recipe.preptime %>" required>
                        <div class="valid-feedback">Nice!</div>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label" for="cooktime">Cooktime</label>
                <textarea class="form-control" type="text" id="cooktime"
                    name="recipe[cooktime]" required><%= recipe.cooktime%></textarea>
                    <div class="valid-feedback">Done!</div>
            </div>
            <div class="mb-3">
                <button class="btn btn-success">Update Recipe</button>
            </div>
        </form>
        <a href="/recipes/<%= recipe._id%>">Back To All Recipes</a>

    </div>
</div>

<script>
    const container = document.getElementById('ingredient-container')
    const button = document.getElementById('addIngredient')
    let counter = 1
    button.addEventListener('click',(event) => {
        console.log('clicked')
        event.preventDefault()
        container.insertAdjacentHTML('beforeend' , `<div id="single-ingredient">
            <label class="ingredient-label" for="ingredients"></label>
<input class="form-control ingredient-form" type="number" id="ingredients" name='ingredients[${counter}]' placeholder="0" required>
<select name='ingredients[${counter}]' class="form-select ingredient-form" aria-label="Default select example">
    <option value="cups">Cups</option>
    <option value="ounces">Ounces</option>
    <option value="tbps">Tbps</option>
    <option value="tsps">Tsp</option>
</select> 
<input class="ingredient-form" type="text" name='ingredients[${counter}]'>
                </div>`)

                counter++
    })
</script>